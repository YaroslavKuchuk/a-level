# Урок №40. Web API

## Полезные ссылки

[JSON vs XML](https://habr.com/ru/post/31225/)

[Web API 2 в ASP.NET](https://metanit.com/sharp/aspnet_webapi/1.1.php)

[ASP.NET Web APIs](https://dotnet.microsoft.com/apps/aspnet/apis)

## Сервис-ориентированная архитектура

![SOA](/Module-5/images/soa.png)

Модульный подход к разработке программного обеспечения, основанный на использовании распределенных, 
слабосвязанных и заменяемых компонентов, оснащённых стандартизированными интерфейсами для взаимодействия по стандартизированным протоколам.

SOA придуман в конце 1980-х.

![Systems evolution](/Module-5/images/systems-evolution.png)

Грубо говоря, SOA — набор архитектурных принципов, не зависящих от технологий и продуктов.

* **Веб-сервисы**
* Очередь сообщений
* Сервисная шина
* Микросервисы

![Architecture](/Module-5/images/architecture.png)

![SOA](/Module-5/images/soa-interaction.png)

**SOA веб-сервисы** — не просто API общего назначения, всего лишь предоставляющие CRUD-доступ к базе 
данных через HTTP.

Ради целостности ваших данных необходимо, чтобы пользователи понимали лежащую в основе 
реализации модель и соблюдали бизнес-правила.

SOA подразумевает, что веб-сервисы являются ограниченными контекстами бизнес-субдоменов 
(business sub-domain) и отделяет реализацию от решаемых веб-сервисами задач.


### Достоинства

* Независимость набора технологий, развёртывания и масштабируемости сервисов.

* Стандартный, простой и надёжный канал связи (передача текста по HTTP через порт 80).

* Оптимизированный обмен сообщениями.

* Стабильная спецификация обмена сообщениями.

* Изолированность контекстов доменов (Domain contexts).

### Недостатки

* Разные веб-сервисы тяжело интегрировать из-за различий в языках передачи сообщений. 

* Например, два веб-сервиса, использующих разные JSON-представления одной и той же концепции.

* Синхронный обмен сообщениями может перегрузить системы.

## JSON vs XML

![XML & JSON](/Module-5/images/xml-and-json.png)

Кросс-платформенные форматы, используемые для кооперации приложений.

![XML vs JSON](/Module-5/images/json-vs-xml.png)

## Web API

* Часть технологии ASP.NET

* Великолепный способ создать REST-сервисы – открыть доступ к данным

Web API – веб-служба, которая может взаимодействовать с различными приложениями.

![Web API controller](/Module-5/images/web-api-controller.png)

### CRUD в Web API

* Create – POST

* Retrieve – GET

* Update – PUT

* Delete - DELETE

### Web API Pipeline

![Web API request](/Module-5/images/web-api-request.png)

![Web API pipeline](/Module-5/images/web-api-pipeline.png)

## Практика 

Открываем PhoneBook.

* Добавляем новый API-проект

* Переносим логику получения/изменения информации

## Fiddler/Postman

## Домашнее задание

1. **Теория**

2. Расширить созданный на уроке Phonebook API

* Создать CRUD-операции
* Проверять Fiddler/Postmans